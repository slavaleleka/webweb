<!------------------------------------------------------------------------->
<!-- https://slavaleleka.github.io/webweb/testing/pages/png-redirect.html -->
<!------------------------------------------------------------------------->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test image load</title>

    <!-- Content Security Policy that restricts resources to self and a specific domain -->
    <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; img-src 'self' https://slavaleleka.github.io;"
    >

    <!-- Link to external script -->
    <!-- <script src="png-redirect-script.js"></script> -->
    <script
        nonce="nonce-abc123"
    >
        function loadUnsafeResource() {
            // Attempt to load a resource that redirects to an unsafe domain
            const img = document.createElement('img');

            img.src = 'https://slavaleleka.github.io/webweb/testing/pages/png-redirect.png';
            // img.src = 'https://raw.githubusercontent.com/slavaleleka/webweb/master/testing/pages/png-redirect.png';

            // ||slavaleleka.github.io^$image,redirect=2x2-transparent.png

            img.onload = () => console.log('Image loaded successfully');
            img.onerror = (err) => console.error('Failed to load image:', err);

            document.body.appendChild(img);
        }
    </script>
</head>
<body>
    <h2>Test image loading</h2>

    <h3>by button:</h3>
    <button onclick="loadUnsafeResource()">Load image</button>

    <h3>direct:</h3>
    <img
        src="https://slavaleleka.github.io/webweb/testing/pages/png-redirect-02.png"
        alt="no redirect test image"
    />

    <div id="test-text-node">
        REMOVE_THIS_STRING
        <div id="child1"></div>
        <div id="child2"></div>
    </div>
</body>
</html>
